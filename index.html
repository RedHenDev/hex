<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Hexagon Terrain Generator</title>
    
    <link rel="stylesheet" type="text/css" href="style.css">
    
    <!-- Initialize TerrainConfig before loading A-Frame -->
    <script>
        // Initialize the terrain configuration
        window.TerrainConfig = {
            // General terrain settings
            seed: Math.floor(Math.random() * 1000000), // Random seed for terrain generation
            heightScale: 128.0,        // Controls the maximum height of terrain
            noiseScale: 0.008,         // Controls the horizontal scale of terrain features (lower = larger features)
            baseHeight: 0.2,          // Minimum height for terrain (base level)
            
            // Terrain feature settings
            useRidges: true,          // Enables ridge-based terrain features (mountains)
            ridgeFactor: 0.3,         // How prominent ridges/mountains are (0-1)
            
            // Noise algorithm settings
            octaves: 8,               // Number of noise octaves for base terrain (more = more detail)
            ridgeOctaves: 4,          // Number of noise octaves for ridge features
            lacunarity: 2.0,          // Controls frequency increase per octave
            gain: 0.5,                // Controls amplitude decrease per octave
            
            // Geometry settings
            useHexagons: true,       // Use hexagon geometry instead of cubes
            geometrySize: 0.975,        // Size of terrain geometry units
            
            // Chunk system settings
            chunkSize: 8,            // Size of each terrain chunk (in geometry units)
            loadDistance: 100,        // Distance at which chunks are loaded
            unloadDistance: 150,      // Distance at which chunks are unloaded
            
            // Color settings
            colorVariation: 0.8,      // Amount of color variation (0-1)
            
            // Apply all settings to create consistent terrain
            applyToGenerator: function(generator) {
                if (generator) {
                    generator.heightScale = this.heightScale;
                    generator.noiseScale = this.noiseScale;
                    generator.baseHeight = this.baseHeight;
                    generator.octaves = this.octaves;
                    generator.ridgeOctaves = this.ridgeOctaves;
                    generator.useRidges = this.useRidges;
                    generator.ridgeFactor = this.ridgeFactor;
                    generator.seed = this.seed;
                    generator.hex = this.useHexagons;
                    generator.cubeSize = this.geometrySize;
                }
            }
        };
        
        console.log("TerrainConfig initialized with seed:", window.TerrainConfig.seed);
    </script>
    
    <!-- Load A-Frame -->
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
</head>
<body>
    <!-- Loading screen -->
    <div id="loading-screen">
        <div class="spinner"></div>
        <h2>Loading Hexagon Terrain...</h2>
        <p>Please wait while system grows terrain.</p>
    </div>
    
    <a-scene terrain-manager>
        <!-- Camera positioned to view the terrain from above -->
        <a-entity id="subject" position="0 50 0" rotation="0 0 0" 
                  camera look-controls wasd-controls="acceleration: 50"></a-entity>
        
        <!-- Lighting to make the terrain visible -->
        <a-entity light="type: ambient; color: #BBB; intensity: 0.5"></a-entity>
        <a-entity light="type: directional; color: #FFF; intensity: 0.8" 
                  position="-1 2 1"></a-entity>
        
        <!-- Sky background -->
        <a-sky color="#00FFFF"></a-sky>
        
        <!-- Container for terrain chunks -->
        <a-entity id="terrain-container"></a-entity>
    </a-scene>
    
    <!-- Load scripts in the correct order -->
    <script src="hex-geometry.js"></script>
    <!-- <script src="geometry.js"></script> -->
    <script src="terrain-system.js"></script>
    <!-- <script src="texture-controls.js"></script> -->
    <script src="start-terrain.js"></script>
    <script src="direct-terrain-controls.js"></script>
</body>
</html>